---
import Layout from "./main.astro";
import Header from "../components/header";
const { frontmatter } = Astro.props;
---

<Layout title={frontmatter.title} description={frontmatter.description}>
  <Header client:load />
  
  <!-- Main content area with proper padding for header -->
  <main class="relative z-10 w-full min-h-screen pt-24 md:pt-28 pb-20">
    
    <div class="max-w-[1000px] mx-auto px-6 md:px-12">
      
      <!-- Back Button (outside card) -->
      <a 
        href="/posts" 
        class="inline-flex items-center gap-2 text-sm text-neutral-400 hover:text-neutral-600 transition-colors mb-6 group"
      >
        <svg 
          class="w-4 h-4 group-hover:-translate-x-1 transition-transform" 
          fill="none" 
          stroke="currentColor" 
          viewBox="0 0 24 24"
        >
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"/>
        </svg>
        <span>Back to Posts</span>
      </a>

      <!-- Card Container -->
      <article class="bg-white rounded-2xl shadow-sm border border-neutral-200 overflow-hidden">
        
        <!-- Article Header -->
        <header class="px-8 md:px-12 pt-10 pb-8">
          
          <div class="flex items-center gap-3 mb-4 text-sm">
            <span class="font-mono text-xs text-neutral-500 bg-neutral-100 px-2 py-1 rounded">
              {frontmatter.category || "Article"}
            </span>
            <span class="text-neutral-300">/</span>
            <span class="text-neutral-400">{frontmatter.dateFormatted}</span>
          </div>
          
          <h1 class="text-3xl md:text-4xl lg:text-[2.5rem] font-bold text-neutral-900 leading-[1.2] tracking-tight">
            {frontmatter.title}
          </h1>
          
          {frontmatter.description && (
            <p class="text-lg text-neutral-600 leading-relaxed mt-4 max-w-2xl">
              {frontmatter.description}
            </p>
          )}
        </header>

        <!-- Cover Image -->
        {frontmatter.cover && (
          <div class="w-full">
            <img 
              src={frontmatter.cover} 
              alt={frontmatter.title}
              class="w-full h-64 md:h-80 object-cover"
            />
          </div>
        )}

        <!-- Article Content -->
        <div class="px-8 md:px-12 py-10">
          <div class="prose prose-lg prose-neutral max-w-none">
            <slot />
          </div>
        </div>

        <!-- Article Footer -->
        <footer class="px-8 md:px-12 py-6 bg-neutral-50 border-t border-neutral-100">
          <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4">
            <p class="text-sm text-neutral-500">
              Thanks for reading!
            </p>
            <a 
              href="/posts"
              class="inline-flex items-center gap-2 text-sm font-medium text-neutral-900 hover:text-neutral-600 transition-colors"
            >
              Read more posts
              <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"/>
              </svg>
            </a>
          </div>
        </footer>
      </article>
    </div>
  </main>

  <!-- KaTeX for math rendering -->
  {frontmatter.math && (
    <>
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.css" />
      <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.js"></script>
      <script
        defer
        src="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/contrib/auto-render.min.js"
        onload="renderMathInElement(document.body, {delimiters: [{left: '$$', right: '$$', display: true}, {left: '$', right: '$', display: false}]});"
      ></script>
    </>
  )}
</Layout>
